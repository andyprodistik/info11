import{css as oe,html as b}from"@haxtheweb/haxcms-elements/lib/core/HAXCMSLitElementTheme.js";import{PolarisFlexTheme as ae}from"@haxtheweb/polaris-theme/lib/polaris-flex-theme.js";import"@haxtheweb/haxcms-elements/lib/ui-components/blocks/site-children-block.js";import{css as C,LitElement as v,html as l}from"https://cdn.jsdelivr.net/npm/lit@3.1.4/+esm";import{DDDSuper as le}from"@haxtheweb/d-d-d/d-d-d.js";var q=Object.freeze,ue=Object.defineProperty,m=(r,e)=>q(ue(r,"raw",{value:q(r.slice())}));/**
* Copyright 2025 andyyulianto77
* @license Apache-2.0, see License.md for full text.
*/var Q,z,P,M,B,O;class F extends ae{static get styles(){return[super.styles,oe(Q||(Q=m(['\n        :host {\n          display: block;\n        }\n        aside {\n          float: left;\n          width: 240px;\n        }\n        aside section h4 {\n          font-size: 16px;\n          margin: var(--ddd-spacing-0) var(--ddd-spacing-0) var(--ddd-spacing-6) var(--ddd-spacing-0);\n          text-transform: uppercase;\n          font-family: "Open Sans", sans-serif;\n          font-weight: 300;\n        }\n\n        aside section {\n          background-color: #fff;\n          border-radius: 3px;\n          margin-bottom: var(--ddd-spacing-10);\n          padding: 0px var(--ddd-spacing-10) var(--ddd-spacing-10) 0px;\n        }\n\n        site-children-block {\n          --site-children-block-border-bottom: lightblue 1px solid;\n          --site-children-block-li-padding: 8px 0;\n          --site-children-block-link-hover-color: rgb(0, 95, 169);\n          --site-children-block-active-border-left: rgb(0, 95, 169) 3px solid;\n          --site-children-block-link-active-color: rgb(0, 30, 68);\n          font-family: "Roboto Condensed", sans-serif;\n          font-size: 16px;\n        }\n      '])))]}renderHeaderSlot(){return b(z||(z=m([""])))}renderSideBar(){return b(P||(P=m(['\n    <aside\n          role="complementary"\n          aria-label="Primary Sidebar"\n          itemtype="http://schema.org/WPSideBar"\n          part="page-primary-sidebar"\n        >\n          <section>\n            <site-children-block\n              part="page-children-block"\n              dynamic-methodology="ancestor"\n            ></site-children-block>\n          </section>\n        </aside>\n    '])))}renderFooterContactInformation(){return b(M||(M=m([""])))}renderFooterSecondarySlot(){return b(B||(B=m([""])))}renderFooterPrimarySlot(){return b(O||(O=m([""])))}static get tag(){return"custom-info11-theme"}constructor(){super()}}customElements.define(F.tag,F);var D=Object.freeze,E=Object.defineProperty,de=(r,e,t)=>e in r?E(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,g=(r,e,t)=>(de(r,typeof e!="symbol"?e+"":e,t),t),u=(r,e)=>D(E(r,"raw",{value:D(r.slice())})),R,K,N,U,L,j,$,T,V;class _ extends v{constructor(){super(),this.message="",this.isCorrect=!1,this.isDisabled=!1,this.isChecked=!1,this.currentQuestionIndex=0,this.showSummary=!1,this.showIntroForm=!0,this.webAppUrl="",this.questionsAttr="",this.kuisAttr="",this.autoloadResults=!0,this.questions=[],this.externalSummary=null,this.externalLoaded=!1,this.userName="",this.userKelas="",this.userAddress="",this.defaultQuestions=[{question:"Siapakah presiden pertama Indonesia?",answer:"soekarno"}],this.userAnswers=[],this.correctAnswers=[]}connectedCallback(){super.connectedCallback();const e=this.getAttribute("questions")||this.getAttribute("kuis")||"",t=this._parseQuestions(e);t&&t.length&&(this.questions=t),(!this.questions||!this.questions.length)&&(this.questions=this.defaultQuestions.slice()),this._resetQuizState()}async firstUpdated(){if(this.autoloadResults){const e=this._loadResults();if(e&&Array.isArray(e.userAnswers)&&Array.isArray(e.correctAnswers)&&Array.isArray(e.questions)){this.questions=e.questions,this.userAnswers=e.userAnswers,this.correctAnswers=e.correctAnswers,this.currentQuestionIndex=Math.min(e.currentQuestionIndex||0,Math.max(0,this.questions.length-1));const t=Array.isArray(this.userAnswers)&&this.userAnswers.length>=this.questions.length&&this.correctAnswers.length>=this.questions.length;this.showSummary=!!e.showSummary||t,this.showSummary&&(this.isDisabled=!0)}}await this._loadFromSiteJson()}updated(e){(e.has("questionsAttr")||e.has("kuisAttr"))&&this._applyAttrQuestions()}_applyAttrQuestions(){const e=this._parseQuestions(this.questionsAttr),t=this._parseQuestions(this.kuisAttr),s=e&&e.length?e:t&&t.length?t:null;s&&s.length&&(this.questions=s),(!this.questions||!this.questions.length)&&(this.questions=this.defaultQuestions.slice()),this._resetQuizState()}_parseQuestions(e){if(!e||typeof e!="string")return null;try{const t=JSON.parse(e);if(Array.isArray(t))return t.map(s=>({question:String(s.question||"").trim(),answer:String(s.answer||"").trim().toLowerCase()})).filter(s=>s.question&&s.answer)}catch(t){}return null}get currentQuestion(){return this.questions[this.currentQuestionIndex]}get totalQuestions(){return this.questions.length}_resetQuizState(){this.currentQuestionIndex=0,this.showSummary=!1,this.message="",this.isCorrect=!1,this.isDisabled=!1,this.isChecked=!1,this.userAnswers=[],this.correctAnswers=[]}launchConfetti(){const e=document.getElementById("confetti")||document.querySelector("kuis-confeti");if(e&&typeof e.fire=="function"){e.fire({duration:2e3,particleCount:220});return}window.confetti&&window.confetti({particleCount:200,spread:150,angle:90,startVelocity:60,origin:{x:.5,y:.7},colors:["#4ade80","#22c55e","#10b981","#1a73e8","#f97316"]})}_storageKey(){try{return"confetti-quiz:".concat(location.pathname)}catch(e){return"confetti-quiz"}}_saveResults(){try{const e={questions:this.questions,userAnswers:this.userAnswers,correctAnswers:this.correctAnswers,currentQuestionIndex:this.currentQuestionIndex,showSummary:this.showSummary,score:this.getScore(),percentage:this.getPercentage(),savedAt:Date.now(),userName:this.userName,userPhone:this.userPhone,userKelas:this.userKelas,userAbsen:this.userAbsen,userAddress:this.userAddress};localStorage.setItem(this._storageKey(),JSON.stringify(e))}catch(e){}}_loadResults(){try{const e=localStorage.getItem(this._storageKey());return e?JSON.parse(e):null}catch(e){return null}}clearResults(){try{localStorage.removeItem(this._storageKey())}catch(e){}this.externalSummary=null,this.externalLoaded=!1}_currentSlug(){try{const e=location.pathname.replace(/\/+$/,"");return decodeURIComponent(e.split("/").filter(Boolean).pop()||"welcome")}catch(e){return"welcome"}}async _loadFromSiteJson(){try{if(location.hostname==="localhost"||location.hostname==="127.0.0.1")return;const e=await fetch("../site.json",{credentials:"same-origin"});if(!e.ok)return;const t=await e.json(),s=this._currentSlug(),i=(Array.isArray(t.items)?t.items:[]).find(a=>(a.slug||"")===s),n=i&&i.metadata?i.metadata:null,o=n&&(n.quiz||n.quizResult);if(o&&(o.finished||typeof o.score=="number")){const a=Array.isArray(this.questions)&&this.questions.length?this.questions.length:o.total||0;this.externalSummary={score:o.score||0,percentage:o.percentage||0,total:a},this.externalLoaded=!0,this.showSummary=!0,this.isDisabled=!0,this.showIntroForm=!1}}catch(e){}}_handleIntroSubmit(e){var t,s,i,n,o,a,h,d,p,f;e.preventDefault();const c=this.renderRoot.querySelector("#intro-form");if(!c)return;const k=((s=(t=c.querySelector("#user-name"))==null?void 0:t.value)==null?void 0:s.trim())||"",S=((n=(i=c.querySelector("#user-phone"))==null?void 0:i.value)==null?void 0:n.trim())||"",A=((a=(o=c.querySelector("#user-kelas"))==null?void 0:o.value)==null?void 0:a.trim())||"",w=((d=(h=c.querySelector("#user-absen"))==null?void 0:h.value)==null?void 0:d.trim())||"",y=((f=(p=c.querySelector("#user-address"))==null?void 0:p.value)==null?void 0:f.trim())||"";this.userName=k,this.userPhone=S,this.userKelas=A,this.userAbsen=w,this.userAddress=y,this.showIntroForm=!1,this._resetQuizState(),this._saveResults()}_emitFinished(e){try{const t={slug:this._currentSlug(),result:e,user:{name:this.userName,phone:this.userPhone,kelas:this.userKelas,absen:this.userAbsen,address:this.userAddress},webAppUrl:this.webAppUrl||this.getAttribute("web-app-url")||""};this.dispatchEvent(new CustomEvent("quiz-finished",{detail:t,bubbles:!0,composed:!0}))}catch(t){}}checkAnswer(){const e=this.shadowRoot.getElementById("answer-input").value.trim().toLowerCase(),t=this.currentQuestion.answer.toLowerCase();this.message="",this.userAnswers[this.currentQuestionIndex]=e,this.isChecked=!0,e===t?(this.isCorrect=!0,this.correctAnswers[this.currentQuestionIndex]=!0,this.message="\u{1F389} Benar! Jawaban Anda tepat. Selamat!",this.isDisabled=!0,this.launchConfetti()):(this.isCorrect=!1,this.correctAnswers[this.currentQuestionIndex]=!1,this.message='\u274C Salah. Jawaban yang benar adalah: "'.concat(this.currentQuestion.answer,'"')),this._saveResults();const s={score:this.getScore(),percentage:this.getPercentage(),finished:!1};this.dispatchEvent(new CustomEvent("quiz-result",{detail:{slug:this._currentSlug(),result:s},bubbles:!0,composed:!0}))}nextQuestion(){if(this.currentQuestionIndex<this.totalQuestions-1){this.currentQuestionIndex++,this.message="",this.isCorrect=!1,this.isDisabled=!1,this.isChecked=this.userAnswers[this.currentQuestionIndex]!==void 0;const e=this.shadowRoot.getElementById("answer-input");e&&(e.value=this.userAnswers[this.currentQuestionIndex]||"")}else{this.showSummary=!0,this._saveResults();const e={score:this.getScore(),percentage:this.getPercentage(),finished:!0,total:this.totalQuestions};this._emitFinished(e)}}previousQuestion(){if(this.currentQuestionIndex>0){this.currentQuestionIndex--,this.message="",this.isCorrect=this.correctAnswers[this.currentQuestionIndex]||!1,this.isDisabled=!!this.correctAnswers[this.currentQuestionIndex],this.isChecked=this.userAnswers[this.currentQuestionIndex]!==void 0;const e=this.shadowRoot.getElementById("answer-input");e&&(e.value=this.userAnswers[this.currentQuestionIndex]||""),this.userAnswers[this.currentQuestionIndex]&&(this.isCorrect?this.message="\u2705 Jawaban Anda benar!":this.message='\u274C Jawaban yang benar: "'.concat(this.questions[this.currentQuestionIndex].answer,'"'))}}restartQuiz(){this.clearResults(),this.showIntroForm=!0,this._resetQuizState()}getScore(){return this.correctAnswers.filter(e=>e===!0).length}getPercentage(){return Math.round(this.getScore()/this.totalQuestions*100)}handleKeyPress(e){e.key==="Enter"&&!this.isDisabled&&this.checkAnswer()}renderIntroForm(){return l(K||(K=u(['\n            <div class="card">\n                <h1>Mulai Kuis</h1>\n                <form id="intro-form" class="intro" @submit=','>\n                    <div>\n                        <label for="user-name">Nama</label>\n                        <input id="user-name" type="text" placeholder="Nama Anda" required .value=','>\n                    </div>\n                    <div>\n                        <label for="user-phone">No. HP</label>\n                        <input id="user-phone" type="tel" placeholder="08xxxxxxxxxx" .value=','>\n                    </div>\n                    <div>\n                        <label for="user-kelas">Kelas Kamu</label>\n                        <input id="user-kelas" type="tel" placeholder="X-XI-XII" .value=','>\n                    </div>\n                    <div>\n                        <label for="user-absen">No. Absen</label>\n                        <input id="user-absen" type="tel" placeholder="08xxxxxxxxxx" .value=','>\n                    </div>\n                    <div>\n                        <label for="user-address">Alamat</label>\n                        <textarea id="user-address" rows="3" placeholder="Alamat Anda (optional)">','</textarea>\n                    </div>\n                    <button type="submit">Mulai Kuis</button>\n                </form>\n            </div>\n        '])),this._handleIntroSubmit,this.userName||"",this.userPhone||"",this.userKelas||"",this.userAbsen||"",this.userAddress||"")}render(){if(!this.questions||!this.questions.length)return l(N||(N=u(['<div class="card"><h1>Kuis</h1><p>Tidak ada soal.</p></div>'])));if(this.showIntroForm)return this.renderIntroForm();if(this.showSummary)return this.renderSummary();const e=this.isCorrect?"correct-answer":"wrong-answer",t=(this.currentQuestionIndex+1)/this.totalQuestions*100,s=this.getScore(),i=this.getPercentage(),n=this.currentQuestionIndex===this.totalQuestions-1;return this.userAnswers[this.currentQuestionIndex],l(L||(L=u(['\n            <div class="card">\n                <h1>Kuis Pengetahuan Umum</h1>\n                <div style="text-align:center;color:#6b7280;margin-top:.25rem;margin-bottom:.5rem">\n                    Nilai: '," / "," (",'%)\n                </div>\n\n                <div class="progress-bar">\n                    <div class="progress-fill" style="width: ','%"></div>\n                </div>\n\n                <div id="quiz-area">\n                    <div class="question-number">Soal '," dari ","</div>\n\n                    <p>",". ",'</p>\n\n                    <input\n                        type="text"\n                        id="answer-input"\n                        placeholder="Tulis jawaban Anda di sini..."\n                        ?disabled=',"\n                        @keypress=","\n                        .value=",'\n                    />\n\n                    <button\n                        id="check-button"\n                        @click=',"\n                        ?disabled=",'\n                        style="background-color: ',"; color: white; cursor: ",';"\n                    >\n                        Cek Jawaban\n                    </button>\n\n                    <div id="message-box" style="margin-top: 1rem; text-align: center; min-height: 40px;">\n                        ','\n                    </div>\n\n                    <div class="nav-buttons">\n                        <button\n                            class="nav-button"\n                            @click=',"\n                            ?disabled=",'\n                            style="background-color: ','; color: white;"\n                        >\n                            \u2190 Sebelumnya\n                        </button>\n                        <button\n                            class="nav-button primary"\n                            @click=',"\n                            ?disabled=","\n                            aria-disabled=",'\n                            style="background-color: ','; color: white;"\n                        >\n                            ',"\n                        </button>\n                    </div>\n                </div>\n            </div>\n        "])),s,this.totalQuestions,i,t,this.currentQuestionIndex+1,this.totalQuestions,this.currentQuestionIndex+1,this.currentQuestion.question,this.isDisabled,this.handleKeyPress,this.userAnswers[this.currentQuestionIndex]||"",this.checkAnswer,this.isDisabled,this.isDisabled?"#9ca3af":"#2563eb",this.isDisabled?"not-allowed":"pointer",this.message?l(U||(U=u(["<div class=",">","</div>"])),e,this.message):"",this.previousQuestion,this.currentQuestionIndex===0,this.currentQuestionIndex===0?"#9ca3af":"#6b7280",this.nextQuestion,!this.isChecked,!this.isChecked,this.isChecked?"#2563eb":"#9ca3af",n?"Lihat Hasil":"Selanjutnya \u2192")}renderSummary(){const e=this.externalSummary,t=e?e.score:this.getScore(),s=e?e.percentage:this.getPercentage(),i=e?e.total||this.totalQuestions:this.totalQuestions,n=t===i;return l($||($=u(['\n            <div class="card">\n                <div class="summary">\n                    <h1>Hasil Kuis</h1>\n\n                    <div class="summary-score">'," / ",'</div>\n\n                    <div style="font-size: 1.5rem; color: #6b7280; margin-bottom: 2rem;">\n                        ',"% Benar\n                    </div>\n\n                    ",'\n\n                    <button\n                        class="nav-button primary"\n                        @click=','\n                        style="margin-top: 2rem; width: 100%; padding: 1rem; font-size: 1.125rem; color: white;"\n                    >\n                        Ulangi Kuis\n                    </button>\n                </div>\n            </div>\n        '])),t,i,s,n?l(j||(j=u(['\n                        <div style="color: #10b981; font-size: 1.25rem; margin-bottom: 1rem;">\n                            \u{1F389} Sempurna! Semua jawaban benar!\n                        </div>\n                    ']))):"",this.restartQuiz)}}g(_,"properties",{message:{type:String},isCorrect:{type:Boolean},isDisabled:{type:Boolean},isChecked:{type:Boolean},currentQuestionIndex:{type:Number},showSummary:{type:Boolean},showIntroForm:{type:Boolean},webAppUrl:{type:String,attribute:"web-app-url"},questionsAttr:{type:String,attribute:"questions"},kuisAttr:{type:String,attribute:"kuis"},autoloadResults:{type:Boolean,attribute:"autoload-results",reflect:!0},externalSummary:{type:Object},externalLoaded:{type:Boolean},userName:{type:String,attribute:"user-name"},userPhone:{type:String,attribute:"user-phone"},userKelas:{type:String,attribute:"user-kelas"},userAbsen:{type:String,attribute:"user-absen"},userAddress:{type:String,attribute:"user-address"}}),g(_,"styles",C(R||(R=u(["\n        :host {\n            display: block;\n            color: #1f2937;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n        }\n        .card {\n            background-color: white;\n            border-radius: 1rem;\n            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);\n            max-width: 600px;\n            width: 100%;\n            padding: 2rem;\n            box-sizing: border-box;\n            color: #1f2937;\n        }\n        .card h1 {\n            color: #1e40af;\n            font-size: 1.875rem;\n            font-weight: 700;\n            text-align: center;\n            margin: 0 0 1.5rem 0;\n        }\n        .progress-bar {\n            width: 100%;\n            height: 8px;\n            background-color: #e5e7eb;\n            border-radius: 4px;\n            margin-bottom: 1.5rem;\n            overflow: hidden;\n        }\n        .progress-fill {\n            height: 100%;\n            background-color: #3b82f6;\n            transition: width 0.3s ease;\n        }\n        .question-number {\n            color: #6b7280;\n            font-size: 0.875rem;\n            margin-bottom: 0.5rem;\n        }\n        .card p {\n            color: #1f2937;\n            font-size: 1.125rem;\n            font-weight: 500;\n            margin-bottom: 0.75rem;\n            line-height: 1.6;\n        }\n        .correct-answer {\n            background-color: #d1fae5;\n            color: #065f46;\n            padding: 0.5rem;\n            border-radius: 0.5rem;\n            font-weight: 600;\n        }\n        .wrong-answer {\n            background-color: #fee2e2;\n            color: #991b1b;\n            padding: 0.5rem;\n            border-radius: 0.5rem;\n            font-weight: 600;\n        }\n        .check-button, .nav-button {\n            transition: all 0.15s;\n        }\n        .check-button:not([disabled]):hover, .nav-button:not([disabled]):hover {\n            background-color: #1d4ed8;\n            transform: scale(1.01);\n        }\n        .check-button[disabled], .nav-button[disabled] {\n            background-color: #9ca3af;\n            cursor: not-allowed;\n        }\n        .nav-buttons {\n            display: flex;\n            gap: 0.5rem;\n            margin-top: 1rem;\n        }\n        .nav-button {\n            flex: 1;\n            padding: 0.75rem;\n            font-weight: 600;\n            border-radius: 0.5rem;\n            border: none;\n            cursor: pointer;\n            background-color: #6b7280;\n            color: white;\n            font-size: 0.875rem;\n        }\n        .nav-button.primary {\n            background-color: #3b82f6;\n            color: white;\n        }\n        .nav-button:disabled {\n            color: white;\n            opacity: 0.7;\n        }\n        #answer-input {\n            width: 100%;\n            padding: 0.75rem;\n            border: 2px solid #d1d5db;\n            border-radius: 0.5rem;\n            font-size: 1rem;\n            color: #1f2937;\n            background-color: white;\n            box-sizing: border-box;\n        }\n        #answer-input:focus {\n            outline: none;\n            border-color: #3b82f6;\n            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n        }\n        #answer-input:disabled {\n            background-color: #f3f4f6;\n            color: #6b7280;\n            cursor: not-allowed;\n        }\n        #check-button {\n            width: 100%;\n            margin-top: 1rem;\n            padding: 0.75rem;\n            font-weight: 600;\n            border-radius: 0.5rem;\n            border: none;\n            font-size: 1rem;\n        }\n        .summary {\n            text-align: center;\n        }\n        .summary-score {\n            font-size: 3rem;\n            font-weight: bold;\n            color: #3b82f6;\n            margin: 1rem 0;\n        }\n        .summary-item {\n            padding: 0.75rem;\n            margin: 0.5rem 0;\n            border-radius: 0.5rem;\n            text-align: left;\n        }\n        .summary-item.correct {\n            background-color: #d1fae5;\n            border-left: 4px solid #10b981;\n        }\n        .summary-item.incorrect {\n            background-color: #fee2e2;\n            border-left: 4px solid #ef4444;\n            color: #991b1b;\n        }\n        .summary-item.correct {\n            color: #065f46;\n        }\n        .summary h1 {\n            color: #1e40af;\n            font-size: 1.875rem;\n            font-weight: 700;\n            text-align: center;\n            margin-bottom: 1rem;\n        }\n        .summary h2 {\n            color: #1f2937;\n            font-size: 1.25rem;\n            font-weight: 600;\n            margin-bottom: 1rem;\n        }\n\n        /* Intro form */\n        .intro {\n            display: grid;\n            gap: 0.75rem;\n        }\n        .intro input, .intro textarea {\n            width: 100%;\n            padding: 0.75rem;\n            border: 2px solid #d1d5db;\n            border-radius: 0.5rem;\n            font-size: 1rem;\n            color: #1f2937;\n            box-sizing: border-box;\n        }\n        .intro button {\n            padding: 0.75rem;\n            border-radius: 0.5rem;\n            border: none;\n            background-color: #2563eb;\n            color: white;\n            font-weight: 600;\n            cursor: pointer;\n        }\n        .intro button:hover {\n            background-color: #1d4ed8;\n        }\n    "])))),customElements.define("confetti-quiz",_);class I extends v{constructor(){super(),g(this,"_tick",()=>{if(this._raf=requestAnimationFrame(this._tick),performance.now()>=this._endAt&&this._particles.length===0){this.running=!1,cancelAnimationFrame(this._raf);return}const e=this._ctx;if(!e)return;const t=this._canvas.width,s=this._canvas.height;e.clearRect(0,0,t,s);const i=[];for(const n of this._particles)n.vy+=n.g,n.x+=n.vx,n.y+=n.vy,n.r+=n.vr,n.alpha-=.008,!(n.alpha<=0||n.y>s+20)&&(i.push(n),e.save(),e.globalAlpha=Math.max(0,Math.min(1,n.alpha)),e.translate(n.x,n.y),e.rotate(n.r),e.fillStyle=n.color,e.fillRect(-n.w/2,-n.h/2,n.w,n.h),e.restore());this._particles=i}),this.running=!1,this.duration=1500,this.particleCount=180,this._particles=[],this._endAt=0}render(){return l(V||(V=u(['<canvas part="canvas" aria-hidden="true"></canvas>'])))}firstUpdated(){this._canvas=this.renderRoot.querySelector("canvas"),this._ctx=this._canvas.getContext("2d");const e=()=>{const t=Math.max(1,Math.min(2,window.devicePixelRatio||1));this._canvas.width=Math.floor(this.clientWidth*t),this._canvas.height=Math.floor(this.clientHeight*t),this._ctx.setTransform(t,0,0,t,0,0)};this._resize=e,e(),window.addEventListener("resize",e,{passive:!0})}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("resize",this._resize),cancelAnimationFrame(this._raf)}fire(e={}){var t,s,i,n,o,a,h;const d=getComputedStyle(document.documentElement),p=[((t=d.getPropertyValue("--ddd-theme-default-skyBlue"))==null?void 0:t.trim())||"#3da9fc",((s=d.getPropertyValue("--ddd-theme-default-accent"))==null?void 0:s.trim())||"#ef4565",((i=d.getPropertyValue("--ddd-theme-default-link"))==null?void 0:i.trim())||"#6246ea",((n=d.getPropertyValue("--ddd-theme-default-lime"))==null?void 0:n.trim())||"#84cc16",((o=d.getPropertyValue("--ddd-theme-default-warning"))==null?void 0:o.trim())||"#f59e0b"],f=this.clientWidth||window.innerWidth,c=this.clientHeight||window.innerHeight,k=(a=e.particleCount)!=null?a:this.particleCount,S=Math.PI/2,A=-Math.PI/2,w=6;this._particles=new Array(k).fill(0).map(()=>{const y=A+(Math.random()-.5)*S,re=Math.cos(y)*(w*(.6+Math.random()*.8)),ie=Math.sin(y)*(w*(.6+Math.random()*.8));return{x:f/2,y:c*.85,vx:re,vy:ie,g:.18+Math.random()*.22,w:6+Math.random()*6,h:8+Math.random()*6,r:Math.random()*Math.PI,vr:(Math.random()-.5)*.3,color:p[Math.floor(Math.random()*p.length)],alpha:1}}),this._endAt=performance.now()+((h=e.duration)!=null?h:this.duration),this.running||(this.running=!0,this._tick())}}g(I,"properties",{running:{type:Boolean,reflect:!0},duration:{type:Number},particleCount:{type:Number}}),g(I,"styles",C(T||(T=u(["\n        :host { position: fixed; inset: 0; pointer-events: none; display: block; z-index: 9999; }\n        canvas { position: absolute; inset: 0; width: 100%; height: 100%; display: block; }\n    "])))),customElements.define("kuis-confeti",I);var H=Object.freeze,J=Object.defineProperty,ce=(r,e,t)=>e in r?J(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,W=(r,e,t)=>(ce(r,typeof e!="symbol"?e+"":e,t),t),x=(r,e)=>H(J(r,"raw",{value:H(r.slice())})),X,G,Y,Z;class he extends le(v){constructor(){super(),W(this,"handlePause",()=>{this.visibleContent<this.labels.length?(this.visibleContent++,this.launchConfetti()):(this.visibleContent=this.labels.length,this.showButtons=!1),this.showAllOption=this.visibleContent<this.labels.length,this.isMenuOpen=!1}),W(this,"showAll",()=>{this.visibleContent=this.labels.length,this.showButtons=!1,this.launchConfetti(),this.isMenuOpen=!1}),this.visibleContent=1,this.showButtons=!0,this.showAllOption=!1,this.labels=["Content 1","Content 2","Content 3","Content 4","Content 5","Content 6","Content 7","Content 8","Content 9","Content 10","Content 11","Content 12"],this.isMenuOpen=!1,this._dddTokens={}}static get properties(){return{visibleContent:{type:Number},showButtons:{type:Boolean},showAllOption:{type:Boolean},labels:{type:Array},isMenuOpen:{type:Boolean,state:!0}}}connectedCallback(){super.connectedCallback(),this._clickOutsideHandler=e=>{this.isMenuOpen&&!this.shadowRoot.contains(e.composedPath()[0])&&(this.isMenuOpen=!1)},window.addEventListener("click",this._clickOutsideHandler)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("click",this._clickOutsideHandler)}firstUpdated(e){super.firstUpdated&&super.firstUpdated(e),this._readDDDCustomProperties()}_readDDDCustomProperties(){if(!globalThis.document||!globalThis.getComputedStyle)return;const e=globalThis.document.documentElement,t=getComputedStyle(e),s={};for(let i=0;i<t.length;i+=1){const n=t[i];n&&n.startsWith("--ddd-")&&(s[n]=t.getPropertyValue(n).trim())}this._dddTokens=s}static get styles(){return C(X||(X=x(['\n      :host {\n        display: block;\n        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;\n      }\n\n      .content {\n        max-height: 0;\n        overflow: hidden;\n        transition: max-height 0.3s ease-out;\n      }\n      .content.visible {\n        max-height: 100%;\n      }\n\n      /* Container for button group */\n      .btn-group {\n        position: relative;\n        display: inline-flex;\n        vertical-align: middle;\n        margin-top: var(--ddd-spacing-4, 20px);\n      }\n\n      /* General button styling */\n      .btn {\n        display: inline-block;\n        font-weight: 400;\n        text-align: center;\n        vertical-align: middle;\n        user-select: none;\n        border: 1px solid transparent;\n        padding: 0.375rem 0.75rem;\n        font-size: 1rem;\n        line-height: 1.5;\n        transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n        cursor: pointer;\n        color: #fff;\n        background-color: var(--pause-button-bg, #3b5998);\n        border-color: var(--pause-button-bg, #3b5998);\n      }\n\n      .btn:hover {\n        background-color: var(--pause-button-bg-hover, #2d4373);\n        border-color: var(--pause-button-bg-hover, #2d4373);\n      }\n\n      .btn:focus {\n        outline: 0;\n        box-shadow: 0 0 0 0.2rem rgba(59, 89, 152, 0.5);\n      }\n\n      /* Main Button (Lanjut) - Left radius only */\n      .btn-main {\n        border-top-left-radius: 0.25rem;\n        border-bottom-left-radius: 0.25rem;\n        border-top-right-radius: 0;\n        border-bottom-right-radius: 0;\n        padding-right: 12px;\n      }\n\n      /* Toggle Button (Arrow) - Right radius only */\n      .dropdown-toggle {\n        border-top-left-radius: 0;\n        border-bottom-left-radius: 0;\n        border-top-right-radius: 0.25rem;\n        border-bottom-right-radius: 0.25rem;\n        border-left: 1px solid rgba(255, 255, 255, 0.3);\n        padding-left: 10px;\n        padding-right: 10px;\n      }\n\n      /* Arrow Icon */\n      .arrow-down {\n        display: inline-block;\n        width: 0;\n        height: 0;\n        margin-left: 0;\n        vertical-align: middle;\n        border-top: 5px solid;\n        border-right: 5px solid transparent;\n        border-left: 5px solid transparent;\n      }\n\n      /* Dropdown Menu */\n      .dropdown-menu {\n        position: absolute;\n        top: 100%;\n        left: 0;\n        z-index: 1000;\n        display: none;\n        min-width: 10rem;\n        padding: 0.5rem 0;\n        margin: 0.125rem 0 0;\n        font-size: 1rem;\n        color: #212529;\n        text-align: left;\n        list-style: none;\n        background-color: #fff;\n        background-clip: padding-box;\n        border: 1px solid rgba(0, 0, 0, 0.15);\n        border-radius: 0.25rem;\n        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);\n        transform: translate3d(0px, 0px, 0px);\n      }\n\n      .dropdown-menu.show {\n        display: block;\n        animation: fadeIn 0.2s ease-out;\n      }\n\n      .dropdown-item {\n        display: block;\n        width: 100%;\n        padding: 0.25rem 1.5rem;\n        clear: both;\n        font-weight: 400;\n        color: #212529;\n        text-align: inherit;\n        white-space: nowrap;\n        background-color: transparent;\n        border: 0;\n        text-decoration: none;\n        cursor: pointer;\n      }\n\n      .dropdown-item:hover {\n        background-color: #f8f9fa;\n        color: #16181b;\n      }\n\n      @keyframes fadeIn {\n        from { opacity: 0; transform: translateY(-10px); }\n        to { opacity: 1; transform: translateY(0); }\n      }\n    '])))}render(){return l(G||(G=x(['\n      <div class="wrapper">\n        ',"\n        ","\n      </div>\n    "])),this.renderContent(),this.showButtons?this.renderSplitButton():"")}renderContent(){return this.labels.map((e,t)=>l(Y||(Y=x(['\n        <div class="content ','">\n          <slot name="content-','">',"</slot>\n        </div>\n      "])),this.visibleContent>t?"visible":"",t+1,e))}renderSplitButton(){return l(Z||(Z=x(['\n      <div class="btn-group">\n        <!-- Main Button -->\n        <button type="button" class="btn btn-main" @click=','>\n          Lanjut...\n        </button>\n\n        <!-- Toggle Button -->\n        <button \n          type="button" \n          class="btn dropdown-toggle" \n          @click=','\n          aria-haspopup="true" \n          aria-expanded=','\n        >\n          <span class="sr-only"><i class="arrow-down"></i></span>\n        </button>\n\n        <!-- Dropdown Menu -->\n        <div class="dropdown-menu ','">\n          <button class="dropdown-item" @click=',">\n            Tampilkan Semua\n          </button>\n        </div>\n      </div>\n    "])),this.handlePause,this.toggleMenu,this.isMenuOpen,this.isMenuOpen?"show":"",this.showAll)}toggleMenu(e){e.stopPropagation(),this.isMenuOpen=!this.isMenuOpen}launchConfetti(){var e,t,s,i,n;const o=document.getElementById("confetti")||document.querySelector("kuis-confeti");if(o&&typeof o.fire=="function"){o.fire({duration:1500,particleCount:120});return}if(window.confetti){const a=getComputedStyle(document.documentElement),h=[((e=a.getPropertyValue("--ddd-theme-default-skyBlue"))==null?void 0:e.trim())||"#3da9fc",((t=a.getPropertyValue("--ddd-theme-default-accent"))==null?void 0:t.trim())||"#ef4565",((s=a.getPropertyValue("--ddd-theme-default-link"))==null?void 0:s.trim())||"#6246ea",((i=a.getPropertyValue("--ddd-theme-default-lime"))==null?void 0:i.trim())||"#84cc16",((n=a.getPropertyValue("--ddd-theme-default-warning"))==null?void 0:n.trim())||"#f59e0b"];window.confetti({particleCount:100,spread:90,angle:90,startVelocity:45,origin:{x:.5,y:.5},colors:h})}}}customElements.define("split-pause",he);var ee=Object.freeze,te=Object.defineProperty,me=(r,e,t)=>e in r?te(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,pe=(r,e,t)=>(me(r,e+"",t),t),be=(r,e)=>ee(te(r,"raw",{value:ee(r.slice())})),ne;class se extends v{constructor(){super(),this.webAppUrl="",this.listen=!0,this.lastStatus="",this._onFinished=this._onFinished.bind(this),this._lastSentId=null}connectedCallback(){super.connectedCallback(),this.listen&&window.addEventListener("quiz-finished",this._onFinished)}disconnectedCallback(){this.listen&&window.removeEventListener("quiz-finished",this._onFinished),super.disconnectedCallback()}render(){return l(ne||(ne=be(['<span aria-hidden="true" style="display:none">',"</span>"])),this.lastStatus)}async _onFinished(e){const t=e.detail||{},s=t.result||{},i=t.user||{},n=this.webAppUrl||t.webAppUrl;if(!n){this.lastStatus="No webAppUrl provided; skipping send.";return}try{const o=String(s.finished?s.score+"-"+(s.total||0)+"-"+(i.name||"")+"-"+(i.phone||"")+"-"+(i.address||"")+"-"+(t.slug||"")+"-"+Date.now():Date.now());if(this._lastSentId===o)return;this._lastSentId=o;const a=new URLSearchParams({action:"tambah",iddata:o,namaorng:i.name||"Anonymous",nilai:String(s.score||0),kelas:i.kelas||"",absen:i.absen||"",nope:i.phone||"",alamatorng:i.address||"",keterangan:"Kuis: ".concat(t.slug||""," - ").concat(s.percentage||0,"% (").concat(s.score||0,"/").concat(s.total||0,")")});console.log("[quiz-sheets-sender] Sending:",n,a.toString()),await fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a,mode:"no-cors"}),this.lastStatus="Sent to Google Sheets"}catch(o){this.lastStatus="Failed: ".concat(String(o)),console.error("[quiz-sheets-sender] Error:",o)}}}if(pe(se,"properties",{webAppUrl:{type:String,attribute:"web-app-url"},listen:{type:Boolean,reflect:!0},lastStatus:{type:String,state:!0}}),customElements.define("quiz-sheets-sender",se),typeof window<"u"&&!window.__quizSheetsSenderSingleton){const r=document.createElement("quiz-sheets-sender");r.listen=!0,r.style.display="none",document.body.appendChild(r),window.__quizSheetsSenderSingleton=r}
